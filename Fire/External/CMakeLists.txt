SET(SPDLOG_NO_EXCEPTIONS ON)
ADD_SUBDIRECTORY(spdlog)

SET(SDL_STATIC ON)
ADD_SUBDIRECTORY(SDL3 EXCLUDE_FROM_ALL)

FIND_PACKAGE(Vulkan REQUIRED)
ADD_LIBRARY(vulkan INTERFACE)
TARGET_INCLUDE_DIRECTORIES(vulkan
INTERFACE
  Vulkan::Headers
)
TARGET_SOURCES(vulkan INTERFACE)
TARGET_LINK_LIBRARIES(vulkan
INTERFACE
  Vulkan::Vulkan
)

ADD_LIBRARY(imgui INTERFACE)
TARGET_INCLUDE_DIRECTORIES(imgui
INTERFACE
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui
)
TARGET_SOURCES(imgui
INTERFACE
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imconfig.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui_demo.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui_draw.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui_internal.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui_tables.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imgui_widgets.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imstb_rectpack.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imstb_textedit.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/imstb_truetype.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/backends/imgui_impl_sdl3.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/backends/imgui_impl_sdl3.h
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/backends/imgui_impl_vulkan.cpp
  ${CMAKE_CURRENT_SOURCE_DIR}/imgui/backends/imgui_impl_vulkan.h
)

ADD_LIBRARY(stb INTERFACE)
TARGET_INCLUDE_DIRECTORIES(stb
INTERFACE
  ${CMAKE_CURRENT_SOURCE_DIR}/stb
)
TARGET_SOURCES(stb
INTERFACE
  ${CMAKE_CURRENT_SOURCE_DIR}/stb/stb_image.h
  ${CMAKE_CURRENT_SOURCE_DIR}/stb/stb_image_write.h
)

ADD_LIBRARY(glm INTERFACE)
TARGET_COMPILE_DEFINITIONS(glm
INTERFACE
    GLM_FORCE_SWIZZLE
    GLM_FORCE_RADIANS
    GLM_FORCE_DEFAULT_ALIGNED_GENTYPES
    GLM_ENABLE_EXPERIMENTAL
    GLM_FORCE_CXX17
)
TARGET_INCLUDE_DIRECTORIES(glm
INTERFACE
  ${CMAKE_CURRENT_SOURCE_DIR}/glm
)
TARGET_SOURCES(glm
INTERFACE
  ${CMAKE_CURRENT_SOURCE_DIR}/glm/glm/glm.hpp
)

#SET(TINYGLTF_HEADER_ONLY ON)
#SET(TINYGLTF_BUILD_LOADER_EXAMPLE OFF)
#SET(TINYGLTF_INSTALL OFF)
#SET(TINYGLTF_INSTALL_VENDOR OFF)
#ADD_SUBDIRECTORY(tinygltf)
ADD_LIBRARY(tinygltf STATIC)

TARGET_COMPILE_DEFINITIONS(tinygltf PUBLIC
  TINYGLTF_NO_STB_IMAGE
  TINYGLTF_NO_STB_IMAGE_WRITE
)

TARGET_COMPILE_OPTIONS(tinygltf PRIVATE "-w")

TARGET_INCLUDE_DIRECTORIES(tinygltf PUBLIC
  ${CMAKE_CURRENT_SOURCE_DIR}/tinygltf
)

TARGET_SOURCES(tinygltf PUBLIC
  ${CMAKE_CURRENT_SOURCE_DIR}/tinygltf/tiny_gltf.cc
  ${CMAKE_CURRENT_SOURCE_DIR}/tinygltf/tiny_gltf.h
  ${CMAKE_CURRENT_SOURCE_DIR}/tinygltf/json.hpp
  ${CMAKE_CURRENT_SOURCE_DIR}/tinygltf/stb_image.h
  ${CMAKE_CURRENT_SOURCE_DIR}/tinygltf/stb_image_write.h
)

ADD_LIBRARY(FireExternal STATIC)

TARGET_LINK_LIBRARIES(FireExternal
PUBLIC
  spdlog::spdlog
  SDL3::SDL3-static
  vulkan
  stb
  imgui
  glm
  tinygltf
)
